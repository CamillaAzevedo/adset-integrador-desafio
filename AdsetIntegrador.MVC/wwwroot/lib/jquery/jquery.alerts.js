(function($){$.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:true,overlayOpacity:0.7,overlayColor:'#000',draggable:true,okButton:'&nbsp;OK&nbsp;',cancelButton:'&nbsp;Cancel&nbsp;',dialogClass:null,alertDefaultTitle:'Alert',confirmDefaultTitle:'Confirm',questionDefaultTitle:'Question',promptDefaultTitle:'Prompt',optionsDefaultTitle:'Options',cssContainerMaxWidth:null,alert:function(message,title,callback){if(title==null){title=$.alerts.alertDefaultTitle;}
$.alerts._show(title,message,null,'alert',null,function(result){if(callback){callback(result);}});},confirm:function(message,title,callback){if(title==null){title=$.alerts.confirmDefaultTitle;}
$.alerts._show(title,message,null,'confirm',null,function(result){if(callback){callback(result);}});},question:function(message,title,text_ok,text_cancel,callback){$.alerts.okButton=(text_ok==null?$.alerts.okButton:text_ok);$.alerts.cancelButton=(text_cancel==null?$.alerts.cancelButton:text_cancel);if(title==null){title=$.alerts.questionDefaultTitle;}
$.alerts._show(title,message,null,'confirm',null,function(result){if(callback){callback(result);}});},prompt:function(message,value,title,callback){if(title==null){title=$.alerts.promptDefaultTitle;}
$.alerts._show(title,message,value,'prompt',null,function(result){if(callback){callback(result);}});},options:function(message,title,options,callback){if(title==null){title=$.alerts.optionsDefaultTitle;}
$.alerts._show(title,message,null,'confirm',options,function(result){if(callback){callback(result);}});},_show:function(title,msg,value,type,options,callback){$.alerts._hide();$.alerts._overlay('show');$("body").append('<div id="popup_container">'+'<h1 id="popup_title"></h1>'+'<div id="popup_content">'+'<div id="popup_message"></div>'+'</div>'+'</div>');if($.alerts.dialogClass){$("#popup_container").addClass($.alerts.dialogClass);}
if($.alerts.cssContainerMaxWidth){if(isNaN($.alerts.cssContainerMaxWidth)){var MaxWidth=$.alerts.cssContainerMaxWidth.replace(/[^0-9]/g,'');}else{var MaxWidth=$.alerts.cssContainerMaxWidth;}}else{var MaxWidth=$("#popup_container").outerWidth();}
$("#popup_container").css({position:'fixed',zIndex:99999,padding:0,margin:0});$("#popup_title").text(title);$("#popup_content").addClass(type);$("#popup_message").text(msg);$("#popup_message").html($("#popup_message").text().replace(/\n/g,'<br />'));$("#popup_container").css({minWidth:$("#popup_container").outerWidth(),maxWidth:MaxWidth});$.alerts._reposition();$.alerts._maintainPosition(true);switch(type){case'alert':$("#popup_message").after('<div id="popup_panel"><input type="button" value="'+$.alerts.okButton+'" id="popup_ok" /></div>');$("#popup_ok").click(function(){$.alerts._hide();callback(true);});$("#popup_ok").focus().keypress(function(e){if(e.keyCode==13||e.keyCode==27){$("#popup_ok").trigger('click');}});break;case'confirm':if(options instanceof Object&&options.length>0){var buttons='';for(i=0;i<options.length;i++){buttons+='<input type="button" class="popup_options_custom" value="'
+(options[i].text?options[i].text:options[i].value)+'" id="popup_option_'+i+'" data-value="'+options[i].value+'" />';}
$("#popup_message").after('<div id="popup_panel">'+buttons+'</div>');$('.popup_options_custom').bind('click',function(){$.alerts._hide();if(callback){callback($(this).data('value'));}});}else{$("#popup_message").after('<div id="popup_panel"><input type="button" value="'+$.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+$.alerts.cancelButton+'" id="popup_cancel" /></div>');$("#popup_ok").bind('click',function(){$.alerts._hide();if(callback){callback(true);}});$("#popup_cancel").bind('click',function(){$.alerts._hide();if(callback){callback(false);}});$("#popup_ok").focus();$("#popup_ok, #popup_cancel").keypress(function(e){if(e.keyCode==13){$("#popup_ok").trigger('click');}
if(e.keyCode==27){$("#popup_cancel").trigger('click');}});}
break;case'prompt':$("#popup_message").append('<br /><input type="text" size="30" id="popup_prompt" />').after('<div id="popup_panel"><input type="button" value="'+
$.alerts.okButton+'" id="popup_ok" /> <input type="button" value="'+
$.alerts.cancelButton+'" id="popup_cancel" /></div>');$("#popup_prompt").width($("#popup_message").width());$("#popup_ok").click(function(){var val=$("#popup_prompt").val();$.alerts._hide();if(callback){callback(val);}});$("#popup_cancel").click(function(){$.alerts._hide();if(callback){callback(null);}});$("#popup_prompt, #popup_ok, #popup_cancel").keypress(function(e){if(e.keyCode==13){$("#popup_ok").trigger('click');}
if(e.keyCode==27){$("#popup_cancel").trigger('click');}});if(value){$("#popup_prompt").val(value);}
$("#popup_prompt").focus().select();break;}
if($.alerts.draggable){try{$("#popup_container").draggable({handle:$("#popup_title")});$("#popup_title").css({cursor:'move'});}catch(e){}}},_hide:function(){$("#popup_container").remove();$.alerts._overlay('hide');$.alerts._maintainPosition(false);},_overlay:function(status){switch(status){case'show':$.alerts._overlay('hide');$("body").append('<div id="popup_overlay"></div>');$("#popup_overlay").css({position:'absolute',zIndex:99998,top:'0px',left:'0px',width:'100%',height:$(document).height(),background:$.alerts.overlayColor,opacity:$.alerts.overlayOpacity});break;case'hide':$("#popup_overlay").remove();break;}},_reposition:function(){var top=(($(window).height()/2)-($("#popup_container").outerHeight()/2))+$.alerts.verticalOffset;var left=(($(window).width()/2)-($("#popup_container").outerWidth()/2))+$.alerts.horizontalOffset;if(top<0){top=0;}
if(left<0){left=0;}
$("#popup_container").css({top:top+'px',left:left+'px'});$("#popup_overlay").height($(document).height());},_maintainPosition:function(status){if($.alerts.repositionOnResize){switch(status){case true:$(window).bind('resize',$.alerts._reposition);break;case false:$(window).unbind('resize',$.alerts._reposition);break;}}}}
jAlert=function(message,title,callback){$.alerts.alert(message,title,callback);}
jConfirm=function(message,title,callback){$.alerts.confirm(message,title,callback);};jQuestion=function(message,title,yesbtn,nobtn,callback){$.alerts.question(message,title,yesbtn,nobtn,callback);};jPrompt=function(message,value,title,callback){$.alerts.prompt(message,value,title,callback);};jOptions=function(message,title,options,callback){$.alerts.options(message,title,options,callback);};})(jQuery);